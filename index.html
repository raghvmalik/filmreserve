<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FilmReserve</title>
  <style>
    /* ========================
    Reset & base styles
    ======================== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  background: url('images/bgimg.jpg') no-repeat center center fixed;
  background-size: cover;
  background-color: #000; /* fallback if image doesnâ€™t load */
  animation: fadeIn 1.5s ease-in;
}

  @keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
  }
    
/* ========================
   Navbar
======================== */
.navbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: rgba(0,0,0,0.7);
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  padding: 10px 20px;
  z-index: 1000;
  gap: 20px; 
  transition: opacity 0.3s;
}

.navbar.scrolled { opacity: 0.6; }

.logo {
  font-family: 'Poppins', sans-serif;
  font-weight: bold;
  font-size: 1.8rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  color: violet;
  text-decoration: none;
}

.logo .text {
  background: linear-gradient(90deg, #ff416c, #ff4b2b);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  transition: transform 0.3s ease;
}

.logo:hover .text { transform: scale(1.05); }

/* ========================
   Search & filters
======================== */
.search {
  flex: 1;
  display: flex;
  justify-content: flex-end;
  flex-shrink: 0;
  margin-left: auto;
  margin-right: 15px;
}

.search input {
  width: 200px;
  padding: 8px 12px;
  border-radius: 5px;
  border: none;
  outline: none;
}
  
 .sidebar-wrapper {
  position: relative;
}

.menu-btn {
  font-size: 1.5rem;
  cursor: pointer;
}

.sidebar {
  position: absolute;
  top: 50px;
  left: 0;
  background: rgba(20, 20, 20, 0.95);
  width: 200px;
  height: auto;
  border-radius: 8px;
  display: none;
  flex-direction: column;
  padding: 10px;
}

.sidebar.active {
  display: flex;
}

.sidebar h2 {
  margin-bottom: 10px;
  font-size: 1.2rem;
}

.sidebar-menu {
  list-style: none;
  padding: 0;
  margin: 0;
}

.sidebar-menu li {
  margin: 8px 0;
}

.sidebar-menu li a {
  color: #fff;
  text-decoration: flex;
}

.filters {
  margin-top: 0;
  display: flex;
  justify-content: center;
  gap: 8px;
  flex-wrap: nowrap;
}

.filters select {
  margin: 0 8px;
  padding: 5px;
  border-radius: 6px;
  border: none;
  outline: none;
}

/* ========================
   Movie cards
======================== */
.movie-container {
  background: rgba(0, 0, 0, 0.6);
  border-radius: 15px;
  padding: 20px;
  margin: 0px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 20px;
  justify-content: start;
  align-items: start;
}

.movie-card {
  background: #525252;
  color: #fff;
  width: 100%;
  max-width: 220px;
  min-width: 180px;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  display: flex;
  flex-direction: column;
  align-items: center;
  transition: transform 0.4s ease;
  position: relative;
}

.movie-card:hover {
  box-shadow: 0 8px 32px rgba(0,0,0,0.5);
  transform: scale(1.05);
  color: #1F51FF;
}

.movie-card img {
  width: 100%;
  height: 250px;
  object-fit: cover;
}

.movie-title {
  padding: 10px;
  text-align: center;
  font-size: 1rem;
  font-weight: bold;
  transition: color 0.3s ease;
}

.card-buttons {
  display: flex;
  gap: 8px;
  margin-bottom: 10px;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
}

.movie-card:hover .card-buttons,
.movie-card:focus-visible .card-buttons {
  opacity: 1;
  pointer-events: auto;
}

.plus-btn,
.play-btn {
  border: none;
  color: #fff;
  padding: 6px 12px;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.2s ease;
  transform: scale(1.1);
}

.plus-btn {
  background: #b20710;
}

.plus-btn:hover { background: #E50B42; }

.play-btn { background: #601EF9; }
.play-btn:hover { background: (#8F00FF); }

/* ========================
   Footer
======================== */
footer {
  text-align: center;
  padding: 5px 0;
  background: rgba(0,0,0,0.4);
  font-color: #fff;
  font-size: 0.85rem;
  margin-top: 20px;
  border-top: 1px solid rgba(255,255,255,0.1);
}

/* ========================
   Responsive
======================== */
@media (max-width: 480px) {
  .movie-container { grid-template-columns: 1fr; }
}

/* ========================
   Intro animation overlay
======================== */
.intro-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: black;
  z-index: 9999;
}

.clapper {
  position: relative;
  width: 260px;
  height: 180px;
  transform-origin: center;
  transition: transform 1s ease;
}

.clapper-top {
  position: absolute;
  top: 0;
  width: 100%;
  height: 40px;
  background: repeating-linear-gradient(
    135deg,
    black 0 25px,
    white 25px 50px
  );
  border: 2px solid white;
  border-radius: 5px;
  transform-origin: left bottom;
  transition: transform 0.3s ease;
}

.clapper-mid {
  position: absolute;
  top: 40px;
  width: 100%;
  height: 40px;
  background: repeating-linear-gradient(
    135deg,
    black 0 25px,
    white 25px 50px
  );
  border: 2px solid white;
  border-top: none;
}

.clapper-bottom {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 100px;
  background: black;
  border: 2px solid white;
  border-top: none;
  display: flex;
  justify-content: center;
  align-items: center;
}

.clapper-bottom h1 {
  font-family: "Courier New", monospace;
  font-size: 1rem;
  color: white;
  margin: 0;
}

/* ========================
   Animations
======================== */
.clap { transform: rotate(-25deg); }
.zoom { transform: scale(5); opacity: 0; transition: transform 1s ease, opacity 1s ease; }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet" />
</head>
<body>


  <header class="navbar">
    <div class="sidebar-wrapper">
      <div class="menu-btn">â˜°</div>
      <div class="sidebar">
        <h2>ðŸ‘¤ Your Stuff</h2>
        <ul class="sidebar-menu" id="sidebar-menu"></ul>
      </div>
    </div>
    
    <a href="index.html" class="logo"><span class="emoji">ðŸŽ¬</span> <span class="text">FilmReserve</span></a>
    <div class="search">
      <input type="search" id="searchInput" placeholder="Search movies/series..." />
    </div>
 
  <div class="filters">
    <select id="genreFilter">
      <option value="">All Genres</option>
      <option value="action">Action</option>
      <option value="drama">Drama</option>
      <option value="sci-fi">Sci-Fi</option>
      <option value="hero">Superhero</option>
      <option value="thriller">Thriller</option>
    </select>
    <select id="languageFilter">
      <option value="">All Languages</option>
      <option value="english">English</option>
      <option value="hindi">Hindi</option>
      <option value="korean">Korean</option>
      <option value="japanese">Japanese</option>
    </select>
    <select id="formatFilter">
      <option value="">All Formats</option>
      <option value="2d">720p</option>
      <option value="3d">1080p</option>
      <option value="4k">4K</option>
    </select>
  </div>
</header>

  <main class="movie-container">
    <div class="movie-card" tabindex="1" data-name="fantastic4" ref="trailer.html?movie=fantastic4" data-trailer="true" data-genre="hero" data-language="english" data-format="4k">
      <img src="images/fantastic4.jpeg" alt="Fantastic 4: First Steps" loading="lazy" >
      <div class="movie-title">Fantastic 4<br>First Steps</div>
      <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
      </div>
    </div>
    <div class="movie-card" tabindex="2" data-name="avengers5" ref="trailer.html?movie=avengers5" data-trailer="true" data-genre="hero" data-language="english" data-format="4k">
      <img src="images/avengers.jpg" alt="Avengers: Doomsday" loading="lazy" >
      <div class="movie-title">Avengers<br>Doomsday</div>
      <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
      </div>
    </div>
    <div class="movie-card" tabindex="3" data-name="Oppenheimer" data-page="watch" data-genre="thriller" data-language="english" data-format="3d">
      <img src="images/oppenheimer.jpg" alt="Oppenheimer" loading="lazy" >
      <div class="movie-title">Oppenheimer</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="4" data-name="superman"  ref="trailer.html?movie=superman" data-trailer="true" data-genre="hero" data-language="english" data-format="4k">
      <img src="images/superman.jpeg" alt="Superman" loading="lazy" >
      <div class="movie-title">Superman</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="5" data-name="Interstellar" data-page="watch" data-genre="sci-fi" data-language="english" data-format="4k">
      <img src="images/interstellar.jpg" alt="Interstellar" loading="lazy" >
      <div class="movie-title">Interstellar</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="6" data-name="Inception" data-page="watch" data-genre="sci-fi" data-language="english" data-format="3d">
      <img src="images/inception.jpg" alt="Inception" loading="lazy" >
      <div class="movie-title">Inception</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="7" data-name="28yearslater" ref="trailer.html?movie=28yearslater" data-trailer="true" data-genre="drama" data-language="english" data-format="3d">
      <img src="images/28yearslater.jpeg" alt="28 Years Later" loading="lazy" >
      <div class="movie-title">28 Years Later</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="8" data-name="Minecraft" data-page="watch" data-genre="drama" data-language="english" data-format="2d">
      <img src="images/minecraft.jpeg" alt="Minecraft" loading="lazy" >
      <div class="movie-title">Minecraft</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="9" data-name="F1" data-page="trailer" ref="trailer.html?movie=F1" data-trailer="true" data-genre="action" data-language="english" data-format="3d">
      <img src="images/F1.jpg" alt="F1" loading="lazy" >
      <div class="movie-title">F1</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="10" data-name="finaldestination" ref="trailer.html?movie=finaldestination" data-trailer="true" data-genre="thriller" data-language="english" data-format="3d">
      <img src="images/finaldestination.jpeg" alt="Final Destination" loading="lazy" >
      <div class="movie-title">Final Destination</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="11" data-name="Dune" data-page="watch" data-genre="sci-fi" data-language="english" data-format="2d">
      <img src="images/dune.jpg" alt="Dune" loading="lazy" >
      <div class="movie-title">Dune</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="12" data-name="Wicked" data-page="watch" data-genre="drama" data-language="english" data-format="2d">
      <img src="images/wicked.avif" alt="Wicked" loading="lazy" >
      <div class="movie-title">Wicked</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="13" data-name="Thunderbolts" data-page="trailer" data-genre="action" data-language="english" data-format="2d">
      <img src="images/thunderbolts.jpg" alt="Thunderbolts" loading="lazy" >
      <div class="movie-title">Thunderbolts</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="14" data-name="Spider-Man No Way Home" data-page="watch" data-genre="hero" data-language="english" data-format="3d">
      <img src="images/spiderman.jpg" alt="Spider-Man: No Way Home" loading="lazy" >
      <div class="movie-title">Spider-Man<br>No Way Home</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="15" data-name="Matrix Resurrections" data-page="watch" data-genre="sci-fi" data-language="english" data-format="3d">
      <img src="images/matrix.jpg" alt="Matrix Resurrections" loading="lazy" >
      <div class="movie-title">Matrix Resurrections</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="16" data-name="Kalki 2898 AD" data-page="watch" data-genre="sci-fi" data-language="hindi" data-format="2d">
      <img src="images/kalki.jpg" alt="Kalki 2898 AD" loading="lazy" >
      <div class="movie-title">Kalki 2898 AD</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="17" data-name="Emergency" data-page="watch" data-genre="drama" data-language="hindi" data-format="2d">
      <img src="images/emergency.jpeg" alt="Emergency" loading="lazy" >
      <div class="movie-title">Emergency</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="18" data-name="jurassicworld" ref="trailer.html?movie=jurassicworld" data-trailer="true" data-genre="thriller" data-language="english" data-format="4k">
      <img src="images/jurassicworld.jpg" alt="Jurassic World" loading="lazy" >
      <div class="movie-title">Jurassic World<br>Rebirth</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="19" data-name="Joker 2" data-page="watch" data-genre="drama" data-language="english" data-format="3d">
      <img src="images/joker2.jpg" alt="Joker 2" loading="lazy" >
      <div class="movie-title">Joker 2<br> Folie A Deux</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="20" data-name="Flash" data-page="watch" data-genre="action" data-language="english" data-format="2d">
      <img src="images/flash.webp" alt="Flash" loading="lazy" >
      <div class="movie-title">Flash</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="21" data-name="Deadpool and Wolverine" data-page="watch" data-genre="hero" data-language="english" data-format="3d">
      <img src="images/deadpool.jpg" alt="Deadpool and Wolverine" loading="lazy" >
      <div class="movie-title">Deadpool and Wolverine</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="22" data-name="Batman" data-page="watch" data-genre="action" data-language="english" data-format="3d">
      <img src="images/batman.jpg" alt="Batman" loading="lazy" >
      <div class="movie-title">Batman</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="23" data-name="ballerina" data-page="trailer" data-genre="action" data-language="english" data-format="2d">
      <img src="images/ballerina.jpg" alt="Ballerina" loading="lazy" >
      <div class="movie-title">Ballerina</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="24" data-name="Avatar" data-page="watch" data-genre="sci-fi" data-language="english" data-format="3d">
      <img src="images/avatar.jpg" alt="Avatar" loading="lazy" >
      <div class="movie-title">Avatar</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="25" data-name="Squid Game" data-page="watch" data-genre="drama" data-language="korean" data-format="2d">
      <img src="images/squidgame.jpg" alt="Squid Game" loading="lazy" >
      <div class="movie-title">Squid Game</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="26" data-name="Death Note" data-page="watch" data-genre="thriller" data-language="japanese" data-format="2d">
      <img src="images/deathnote.jpg" alt="Death Note" loading="lazy" >
      <div class="movie-title">Death Note</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="27" data-name="DemonSlayer" data-page="trailer" data-genre="action" data-language="japanese" data-format="3d">
      <img src="images/demonslayer.jpg" alt="Demon Slayer" loading="lazy" >
      <div class="movie-title">Demon Slayer</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
    <div class="movie-card" tabindex="28" data-name="One Piece" data-page="watch" data-genre="action" data-language="japanese" data-format="2d">
      <img src="images/onepiece.jpg" alt="One Piece" loading="lazy" >
      <div class="movie-title">One Piece</div>
       <div class="card-buttons">
      <button class="play-btn" aria-label="Play trailer">â–¶</button>
      <button class="plus-btn" aria-label="Add to watchlist">+</button>
    </div>
    </div>
  </main>
      
  <!-- Intro Animation Overlay -->
<div class="intro-container">
  <div class="clapper">
    <div class="clapper-top"></div>
    <div class="clapper-mid"></div>
    <div class="clapper-bottom">
      <h1>Welcome to FilmReserve</h1>
      <h2>The ultimate<br>streaming destination</h2>
    </div>
  </div>
</div>
  
  <footer>
    FilmReserve | Streaming entertainment anytime, anywhere.
  </footer>

  <script>
    // Select clapper elements
  const topPart = document.querySelector('.clapper-top');
  const clapper = document.querySelector('.clapper');
  const introContainer = document.querySelector('.intro-container');

  // Run animation sequence
  setTimeout(() => {
    topPart.classList.add('clap'); // top flap rotates
    setTimeout(() => {
      topPart.classList.remove('clap');
      setTimeout(() => {
        clapper.classList.add('zoom'); // clapper zooms out and fades
        setTimeout(() => {
          // Remove the intro overlay so the site is accessible
          introContainer.style.display = 'none';
        }, 1000);
      }, 400);
    }, 400);
  }, 800);
    
       // Sidebar toggle
    const menuBtn = document.querySelector('.menu-btn');
    const sidebar = document.querySelector('.sidebar');
    menuBtn.addEventListener('click', () => { sidebar.classList.toggle('active'); });

    // Sidebar menu setup
    const isLoggedIn = localStorage.getItem('loggedIn') === 'true';
    const sidebarMenu = document.getElementById('sidebar-menu');
    sidebarMenu.innerHTML = isLoggedIn
      ? `<li><a href="settings.html">My Profile</a></li>
         <li><a href="watchlist.html">Watchlist</a></li>
         <li><a href="settings.html">Settings</a></li>
         <li><a href="#" onclick="logout()">Logout</a></li>`
      : `<li><a href="login.html">Login</a></li>
         <li><a href="signup.html">Signup</a></li>`;

    function logout() {
      localStorage.setItem('loggedIn', 'false');
      location.reload();
    }
// Navbar
    window.addEventListener('scroll', () => {
      const navbar = document.querySelector('.navbar');
      if (window.scrollY > 30) {
        navbar.classList.add('scrolled');
      } else {
        navbar.classList.remove('scrolled');
      }
    });

    // Search functionality
    const searchInput = document.getElementById('searchInput');
    searchInput?.addEventListener('input', () => {
      const input = searchInput.value.toLowerCase();
      document.querySelectorAll('.movie-card').forEach(card => {
        const name = card.getAttribute('data-name').toLowerCase();
        card.style.display = name.includes(input) ? 'flex' : 'none';
      });
    });

    // Filters handling
    const genreFilter = document.getElementById('genreFilter');
    const languageFilter = document.getElementById('languageFilter');
    const formatFilter = document.getElementById('formatFilter');

    function applyFilters() {
      const genre = genreFilter.value;
      const language = languageFilter.value;
      const format = formatFilter.value;

      document.querySelectorAll('.movie-card').forEach(card => {
        const matchesGenre = !genre || card.dataset.genre === genre;
        const matchesLanguage = !language || card.dataset.language === language;
        const matchesFormat = !format || card.dataset.format === format;
        card.style.display = (matchesGenre && matchesLanguage && matchesFormat) ? 'flex' : 'none';
      });
    }

    genreFilter?.addEventListener('change', applyFilters);
    languageFilter?.addEventListener('change', applyFilters);
    formatFilter?.addEventListener('change', applyFilters);

    // Play trailer or movie page on play button click
    document.querySelectorAll('.play-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const card = btn.closest('.movie-card');
        const movie = card.getAttribute('data-name');
         if(!isLoggedIn){
          alert("Please log in to watch this movie or trailer!");
          return;
        }
        const openTrailer = card.getAttribute('data-trailer') === 'true';
        const allowedPages = ['watch', 'trailer']; // whitelist of permitted pages
        let rawPage = card.getAttribute('data-page');
        const page = openTrailer
          ? 'trailer'
          : (allowedPages.includes(rawPage) ? rawPage : 'watch');
        window.location.href = `${page}.html?movie=${encodeURIComponent(movie)}`;
      });
    });

    // Watchlist logic
    const watchlist = JSON.parse(localStorage.getItem('watchlist')) || [];
    document.querySelectorAll('.plus-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const movie = btn.parentElement.parentElement.querySelector('.movie-title').textContent;
        if (!watchlist.includes(movie)) {
          watchlist.push(movie);
          localStorage.setItem('watchlist', JSON.stringify(watchlist));
          btn.textContent = "âœ“ Added";
        }
      });
    });
  </script>
</body>
</html>
